class Solution {
public:
    int countSetBits(int number) {
        int count = 0;
        while (number > 0) {
            count += number & 1; 
            number >>= 1;     
        }
        return count;
    }

    vector<int> sortByBits(vector<int>& arr) {
        auto customComparator = [&](int &a, int &b) {
            int bitCountA = countSetBits(a);
            int bitCountB = countSetBits(b);

            if (bitCountA == bitCountB) {
                return a < b;
            }

            return bitCountA < bitCountB;
        };
        sort(begin(arr), end(arr), customComparator);

        return arr;
    }
};
